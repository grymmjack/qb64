$Debug
_CONTROLCHR OFF
SCREEN _NEWIMAGE(1680, 900, 32)
_TITLE "DDPATTERN"

CONST NUM_PATTERNS_IN_FILE  = 30
CONST NUM_COLORS_IN_PALETTE = 15
CONST NUM_ROWS_IN_PATTERN   = 8
CONST NUM_COLS_IN_PATTERN   = 8
CONST PATTERN_CELL_W        = 2
CONST PATTERN_CELL_H        = 2
CONST NUM_PATTERN_GRID_X    = 3
CONST NUM_PATTERN_GRID_Y    = 3

TYPE DAZZLEDRAW_PATTERN_STRUCT
    HEADER    AS STRING * 76
    PATTERN1  AS STRING * 64
    PATTERN2  AS STRING * 64
    PATTERN3  AS STRING * 64
    PATTERN4  AS STRING * 64
    PATTERN5  AS STRING * 64
    PATTERN6  AS STRING * 64
    PATTERN7  AS STRING * 64
    PATTERN8  AS STRING * 64
    PATTERN9  AS STRING * 64
    PATTERN10 AS STRING * 64
    PATTERN11 AS STRING * 64
    PATTERN12 AS STRING * 64
    PATTERN13 AS STRING * 64
    PATTERN14 AS STRING * 64
    PATTERN15 AS STRING * 64
    PATTERN16 AS STRING * 64
    PATTERN17 AS STRING * 64
    PATTERN18 AS STRING * 64
    PATTERN19 AS STRING * 64
    PATTERN20 AS STRING * 64
    PATTERN21 AS STRING * 64
    PATTERN22 AS STRING * 64
    PATTERN23 AS STRING * 64
    PATTERN24 AS STRING * 64
    PATTERN25 AS STRING * 64
    PATTERN26 AS STRING * 64
    PATTERN27 AS STRING * 64
    PATTERN28 AS STRING * 64
    PATTERN29 AS STRING * 64
    PATTERN30 AS STRING * 64
END TYPE

TYPE APPLE2_COLOR_PALETTE
    BLACK   AS _UNSIGNED LONG
    GRAY_1  AS _UNSIGNED LONG
    D_BLUE  AS _UNSIGNED LONG
    PURPLE  AS _UNSIGNED LONG
    RED     AS _UNSIGNED LONG
    ORANGE  AS _UNSIGNED LONG
    PINK    AS _UNSIGNED LONG
    YELLOW  AS _UNSIGNED LONG
    GRAY_2  AS _UNSIGNED LONG
    D_GREEN AS _UNSIGNED LONG
    BROWN   AS _UNSIGNED LONG
    L_GREEN AS _UNSIGNED LONG
    AQUA    AS _UNSIGNED LONG
    M_BLUE  AS _UNSIGNED LONG
    L_BLUE  AS _UNSIGNED LONG
    WHITE   AS _UNSIGNED LONG
END TYPE

DIM DAZZLEDRAW_PATTERNS_DATA1 AS DAZZLEDRAW_PATTERN_STRUCT
DIM DAZZLEDRAW_PATTERNS_DATA2 AS DAZZLEDRAW_PATTERN_STRUCT
DIM DAZZLEDRAW_PATTERNS_DATA3 AS DAZZLEDRAW_PATTERN_STRUCT
DIM DAZZLEDRAW_PATTERNS_DATA4 AS DAZZLEDRAW_PATTERN_STRUCT
DIM DAZZLEDRAW_PATTERNS_DATA5 AS DAZZLEDRAW_PATTERN_STRUCT
DIM DAZZLEDRAW_PATTERNS_DATA6 AS DAZZLEDRAW_PATTERN_STRUCT
DIM DAZZLEDRAW_PATTERNS_DATA7 AS DAZZLEDRAW_PATTERN_STRUCT
DIM DAZZLEDRAW_PATTERNS_DATA8 AS DAZZLEDRAW_PATTERN_STRUCT
DIM SHARED APPLE2_COLOR_S AS APPLE2_COLOR_PALETTE
DIM SHARED APPLE2_COLOR_N(0 TO NUM_COLORS_IN_PALETTE) AS _UNSIGNED LONG

DIM f AS LONG
DIM ptrn_file AS STRING

APPLE2_COLOR_S.BLACK   = _RGB(0, 0, 0)
APPLE2_COLOR_S.GRAY_1  = _RGB(82, 82, 82)
APPLE2_COLOR_S.D_BLUE  = _RGB(0, 0, 163)
APPLE2_COLOR_S.PURPLE  = _RGB(206, 47, 214)
APPLE2_COLOR_S.RED     = _RGB(206, 8, 45)
APPLE2_COLOR_S.ORANGE  = _RGB(255, 101, 0)
APPLE2_COLOR_S.PINK    = _RGB(255, 158, 154)
APPLE2_COLOR_S.YELLOW  = _RGB(255, 255, 0)
APPLE2_COLOR_S.GRAY_2  = _RGB(173, 173, 173)
APPLE2_COLOR_S.D_GREEN = _RGB(5, 99, 43)
APPLE2_COLOR_S.BROWN   = _RGB(157, 100, 0)
APPLE2_COLOR_S.L_GREEN = _RGB(24, 222, 0)
APPLE2_COLOR_S.AQUA    = _RGB(57, 255, 142)
APPLE2_COLOR_S.M_BLUE  = _RGB(40, 42, 255)
APPLE2_COLOR_S.L_BLUE  = _RGB(96, 155, 255)
APPLE2_COLOR_S.WHITE   = _RGB(255, 255, 255)

APPLE2_COLOR_N(0)  = APPLE2_COLOR_S.BLACK
APPLE2_COLOR_N(1)  = APPLE2_COLOR_S.D_BLUE
APPLE2_COLOR_N(2)  = APPLE2_COLOR_S.D_GREEN
APPLE2_COLOR_N(3)  = APPLE2_COLOR_S.M_BLUE
APPLE2_COLOR_N(4)  = APPLE2_COLOR_S.BROWN
APPLE2_COLOR_N(5)  = APPLE2_COLOR_S.GRAY_1
APPLE2_COLOR_N(6)  = APPLE2_COLOR_S.L_GREEN
APPLE2_COLOR_N(7)  = APPLE2_COLOR_S.AQUA
APPLE2_COLOR_N(8)  = APPLE2_COLOR_S.RED
APPLE2_COLOR_N(9)  = APPLE2_COLOR_S.PURPLE
APPLE2_COLOR_N(10) = APPLE2_COLOR_S.GRAY_2
APPLE2_COLOR_N(11) = APPLE2_COLOR_S.L_BLUE
APPLE2_COLOR_N(12) = APPLE2_COLOR_S.ORANGE
APPLE2_COLOR_N(13) = APPLE2_COLOR_S.PINK
APPLE2_COLOR_N(14) = APPLE2_COLOR_S.YELLOW
APPLE2_COLOR_N(15) = APPLE2_COLOR_S.WHITE

f& = FREEFILE

ptrn_file$ = "./DEF1.bin"
OPEN ptrn_file$ FOR BINARY AS f&
GET f&, , DAZZLEDRAW_PATTERNS_DATA1
CLOSE f&

render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA1.PATTERN1$,  1, 0  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA1.PATTERN2$,  1, 1  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA1.PATTERN3$,  1, 2  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA1.PATTERN4$,  1, 3  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA1.PATTERN5$,  1, 4  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA1.PATTERN6$,  1, 5  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA1.PATTERN7$,  1, 6  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA1.PATTERN8$,  1, 7  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA1.PATTERN9$,  1, 8  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA1.PATTERN10$, 1, 9  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA1.PATTERN11$, 1, 10 * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA1.PATTERN12$, 1, 11 * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA1.PATTERN13$, 1, 12 * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA1.PATTERN14$, 1, 13 * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA1.PATTERN15$, 1, 14 * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA1.PATTERN16$, 1, 15 * NUM_PATTERN_GRID_Y

SLEEP 

ptrn_file$ = "./B.W.PATTERNS.bin"
OPEN ptrn_file$ FOR BINARY AS f&
GET f&, , DAZZLEDRAW_PATTERNS_DATA2
CLOSE f&

render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA2.PATTERN1$,  800, 0  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA2.PATTERN2$,  800, 1  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA2.PATTERN3$,  800, 2  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA2.PATTERN4$,  800, 3  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA2.PATTERN5$,  800, 4  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA2.PATTERN6$,  800, 5  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA2.PATTERN7$,  800, 6  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA2.PATTERN8$,  800, 7  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA2.PATTERN9$,  800, 8  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA2.PATTERN10$, 800, 9  * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA2.PATTERN11$, 800, 10 * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA2.PATTERN12$, 800, 11 * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA2.PATTERN13$, 800, 12 * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA2.PATTERN14$, 800, 13 * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA2.PATTERN15$, 800, 14 * NUM_PATTERN_GRID_Y
render_dazzledraw_pattern_grid DAZZLEDRAW_PATTERNS_DATA2.PATTERN16$, 800, 15 * NUM_PATTERN_GRID_Y

SUB render_dazzledraw_pattern_grid (pattern$, x%, y%)
    DIM rows, cols AS INTEGER
    FOR rows% = y% TO y% + NUM_PATTERN_GRID_Y
        FOR cols% = x% TO x% + NUM_PATTERN_GRID_X
            render_dazzledraw_pattern _
                pattern$, _
                cols% * (PATTERN_CELL_W * NUM_COLS_IN_PATTERN), _
                rows% * (PATTERN_CELL_H * NUM_ROWS_IN_PATTERN), _
                PATTERN_CELL_W, _
                PATTERN_CELL_H
        NEXT cols%
    NEXT rows%
END SUB

SUB render_dazzledraw_pattern (pattern$, x%, y%, w%, h%)
    DIM AS INTEGER cols, rows, start_x, end_x, start_y, end_y, pixel, pixel_color
    DIM AS STRING char
    DIM AS _UNSIGNED LONG pattern_color
    DIM color_byte AS _UNSIGNED _BYTE

    pixel% = 1
    FOR rows% = 1 TO NUM_ROWS_IN_PATTERN
        FOR cols% = 1 TO NUM_COLS_IN_PATTERN
            start_x%        = x% + (w% * cols%)
            end_x%          = start_x% + w%
            start_y%        = y% + (h% * rows%)
            end_y%          = start_y% + h%
            color_byte~%%   = ASC(MID$(pattern$, pixel%, 1))
            char$           = MID$(pattern$, pixel%, 1)
            pixel_color%    = color_byte~%%
            pattern_color~& = APPLE2_COLOR_N(pixel_color%)
            LINE (start_x%, start_y%)-(end_x%, end_y%), pattern_color~&, BF
            pixel% = pixel% + 1
        NEXT cols%
    NEXT rows%
END SUB
